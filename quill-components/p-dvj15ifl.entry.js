import{r as t,h as e,g as i}from"./p-1eca0859.js";class s{constructor(e){t(this,e),this.format="html",this.debug="warn",this.strict=!0,this.styles="{}",this.preserveWhitespace=!1}setEditorContent(t){if("html"===this.format){const e=this.quillEditor.clipboard.convert(t);this.quillEditor.setContents(e,"api")}else if("text"===this.format)this.quillEditor.setText(t);else if("json"===this.format)try{this.quillEditor.setContents(JSON.parse(t),"api")}catch(e){this.quillEditor.setText(t,"api")}else this.quillEditor.setText(t,"api")}getEditorContent(){const t=this.quillEditor.getText(),e=this.quillEditor.getContents();let i=this.editorElement.children[0].innerHTML;if("<p><br></p>"!==i&&"<div><br><div>"!==i||(i=""),"html"===this.format)return i;if("text"===this.format)this.quillEditor.getText();else{if("json"!==this.format)return t;try{return JSON.stringify(e)}catch(e){return t}}}componentDidLoad(){let t=this.modules?JSON.parse(this.modules):{toolbar:!1};if(t.toolbar&&(t.toolbar=!1),this.quillEditor=new Quill(this.editorElement,{debug:this.debug,modules:t,readOnly:!0,theme:this.theme||"snow",formats:this.formats,strict:this.strict}),this.styles){const t=JSON.parse(this.styles);Object.keys(t).forEach(e=>{this.editorElement.style.setProperty(e,t[e])})}this.editorElement.classList.add("quill-view"),this.content&&(this.setEditorContent(this.content),this.quillEditor.history.clear())}updateStyle(t,e){if(this.editorElement){if(e){const t=JSON.parse(e);Object.keys(t).forEach(t=>{this.editorElement.style.setProperty(t,"")})}if(t){const e=JSON.parse(t);Object.keys(e).forEach(t=>{this.editorElement.style.setProperty(t,e[t])})}}}updateContent(t){const e=this.getEditorContent();if(["text","html","json"].indexOf(this.format)>-1&&t===e)return null;{let i=!1;try{const s=JSON.stringify(t);i=JSON.stringify(e)!==s}catch(t){return null}if(!i)return null}this.setEditorContent(t)}render(){return e(this.preserveWhitespace?"pre":"div",{"quill-element":!0,ref:t=>this.editorElement=t})}get wrapperElement(){return i(this)}static get watchers(){return{styles:["updateStyle"],content:["updateContent"]}}static get style(){return".ql-container.quill-view.sc-quill-view{border:0}"}}export{s as quill_view};