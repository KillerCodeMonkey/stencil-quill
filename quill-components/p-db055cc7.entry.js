import{r as t,c as i,h as s,H as e,g as h}from"./p-b906fdb0.js";const n=class{constructor(s){t(this,s),this.format="html",this.debug="warn",this.placeholder="Insert text here ...",this.strict=!0,this.styles="{}",this.theme="snow",this.customToolbarPosition="top",this.preserveWhitespace=!1,this.defaultModules={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[].slice()},{background:[].slice()}],[{font:[].slice()}],[{align:[].slice()}],["clean"],["link","image","video"]]},this.editorInit=i(this,"editorInit",7),this.editorChange=i(this,"editorChange",7),this.editorContentChange=i(this,"editorContentChange",7),this.editorSelectionChange=i(this,"editorSelectionChange",7),this.editorFocus=i(this,"editorFocus",7),this.editorBlur=i(this,"editorBlur",7)}setEditorContent(t){if("html"===this.format){const i=this.quillEditor.clipboard.convert(t);this.quillEditor.setContents(i,"api")}else if("text"===this.format)this.quillEditor.setText(t,"api");else if("json"===this.format)try{this.quillEditor.setContents(JSON.parse(t),"api")}catch(i){this.quillEditor.setText(t,"api")}else this.quillEditor.setText(t,"api")}getEditorContent(){const t=this.quillEditor.getText(),i=this.quillEditor.getContents();let s=this.editorElement.children[0].innerHTML;if("<p><br></p>"!==s&&"<div><br></div>"!==s||(s=""),"html"===this.format)return s;if("text"===this.format)return t;if("json"!==this.format)return t;try{return JSON.stringify(i)}catch(e){return t}}componentDidLoad(){this.editorElement=this.preserveWhitespace?document.createElement("pre"):document.createElement("div"),this.editorElement.setAttribute("quill-editor","");let t=this.modules?JSON.parse(this.modules):this.defaultModules;const i=this.wrapperElement.querySelector('[slot="quill-toolbar"]');if(i?(t.toolbar=i,"bottom"===this.customToolbarPosition?this.wrapperElement.prepend(this.editorElement):this.wrapperElement.append(this.editorElement)):this.wrapperElement.append(this.editorElement),this.quillEditor=new Quill(this.editorElement,{debug:this.debug,modules:t,placeholder:this.placeholder,readOnly:this.readOnly||!1,theme:this.theme||"snow",formats:this.formats,bounds:this.bounds?"self"===this.bounds?this.editorElement:this.bounds:document.body,strict:this.strict,scrollingContainer:this.scrollingContainer}),this.styles){const t=JSON.parse(this.styles);Object.keys(t).forEach(i=>{this.editorElement.style.setProperty(i,t[i])})}this.content&&(this.setEditorContent(this.content),this.quillEditor.history.clear()),this.editorChangeEvent=this.quillEditor.on("editor-change",(t,i,s,e)=>{if("text-change"===t){const h=this.quillEditor.getText(),n=this.quillEditor.getContents();let r=this.editorElement.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==r&&"<div><br></div>"!==r||(r=null),this.editorChange.emit({content:n,delta:i,editor:this.quillEditor,event:t,html:r,oldDelta:s,source:e,text:h})}else this.editorChange.emit({editor:this.quillEditor,event:t,oldRange:s,range:i,source:e})}),this.selectionChangeEvent=this.quillEditor.on("selection-change",(t,i,s)=>{null===t?this.editorBlur.emit({editor:this.quillEditor,source:s}):null===i&&this.editorFocus.emit({editor:this.quillEditor,source:s}),this.editorSelectionChange.emit({editor:this.quillEditor,range:t,oldRange:i,source:s})}),this.textChangeEvent=this.quillEditor.on("text-change",(t,i,s)=>{const e=this.quillEditor.getText(),h=this.quillEditor.getContents();let n=this.editorElement.querySelector(".ql-editor").innerHTML;"<p><br></p>"!==n&&"<div><br></div>"!==n||(n=null),this.editorContentChange.emit({editor:this.quillEditor,content:h,delta:t,html:n,oldDelta:i,source:s,text:e})}),setTimeout(()=>{this.editorInit.emit(this.quillEditor)})}componentDidUnload(){this.selectionChangeEvent&&this.selectionChangeEvent.removeListener("selection-change"),this.textChangeEvent&&this.textChangeEvent.removeListener("text-change"),this.editorChangeEvent&&this.editorChangeEvent.removeListener("editor-change")}updateContent(t){if(!this.quillEditor)return;const i=this.getEditorContent();if(["text","html","json"].indexOf(this.format)>-1&&t===i)return null;{let e=!1;try{const s=JSON.stringify(t);e=JSON.stringify(i)!==s}catch(s){return null}if(!e)return null}this.setEditorContent(t)}updateReadOnly(t,i){this.quillEditor&&t!==i&&this.quillEditor.enable(!t)}updatePlaceholder(t,i){this.quillEditor&&t!==i&&(this.quillEditor.root.dataset.placeholder=t)}updateStyle(t,i){if(this.editorElement){if(i){const t=JSON.parse(i);Object.keys(t).forEach(t=>{this.editorElement.style.setProperty(t,"")})}if(t){const i=JSON.parse(t);Object.keys(i).forEach(t=>{this.editorElement.style.setProperty(t,i[t])})}}}render(){s(e,null,s("slot",{name:"quill-toolbar","quill-toolbar":""}))}get wrapperElement(){return h(this)}static get watchers(){return{content:["updateContent"],readOnly:["updateReadOnly"],placeholder:["updatePlaceholder"],styles:["updateStyle"]}}},r=class{constructor(i){t(this,i),this.format="html",this.debug="warn",this.strict=!0,this.styles="{}",this.theme="snow",this.preserveWhitespace=!1}setEditorContent(t){if("html"===this.format){const i=this.quillEditor.clipboard.convert(t);this.quillEditor.setContents(i,"api")}else if("text"===this.format)this.quillEditor.setText(t,"api");else if("json"===this.format)try{this.quillEditor.setContents(JSON.parse(t),"api")}catch(i){this.quillEditor.setText(t,"api")}else this.quillEditor.setText(t,"api")}getEditorContent(){const t=this.quillEditor.getText(),i=this.quillEditor.getContents();let s=this.editorElement.children[0].innerHTML;if("<p><br></p>"!==s&&"<div><br></div>"!==s||(s=""),"html"===this.format)return s;if("text"===this.format)return t;if("json"!==this.format)return t;try{return JSON.stringify(i)}catch(e){return t}}componentDidLoad(){let t=this.modules?JSON.parse(this.modules):{toolbar:!1};if(t.toolbar&&(t.toolbar=!1),this.quillEditor=new Quill(this.editorElement,{debug:this.debug,modules:t,readOnly:!0,theme:this.theme||"snow",formats:this.formats,strict:this.strict}),this.styles){const t=JSON.parse(this.styles);Object.keys(t).forEach(i=>{this.editorElement.style.setProperty(i,t[i])})}this.editorElement.classList.add("quill-view"),this.content&&(this.setEditorContent(this.content),this.quillEditor.history.clear())}updateStyle(t,i){if(this.editorElement){if(i){const t=JSON.parse(i);Object.keys(t).forEach(t=>{this.editorElement.style.setProperty(t,"")})}if(t){const i=JSON.parse(t);Object.keys(i).forEach(t=>{this.editorElement.style.setProperty(t,i[t])})}}}updateContent(t){const i=this.getEditorContent();if(["text","html","json"].indexOf(this.format)>-1&&t===i)return null;{let e=!1;try{const s=JSON.stringify(t);e=JSON.stringify(i)!==s}catch(s){return null}if(!e)return null}this.setEditorContent(t)}render(){return s(this.preserveWhitespace?"pre":"div",{"quill-element":!0,ref:t=>this.editorElement=t})}get wrapperElement(){return h(this)}static get watchers(){return{styles:["updateStyle"],content:["updateContent"]}}};r.style=".ql-container.quill-view.sc-quill-view{border:0}";const l=class{constructor(i){t(this,i),this.theme="snow",this.themeClass="ql-snow"}updateTheme(t){this.themeClass="ql-"+(t||"snow")}render(){return s("div",{class:`ql-container ${this.themeClass} quill-view-html`},s("div",{class:"ql-editor",innerHTML:this.content}))}static get watchers(){return{theme:["updateTheme"]}}};l.style=".ql-container.quill-view-html.sc-quill-view-html{border:0}";export{n as quill_editor,r as quill_view,l as quill_view_html}