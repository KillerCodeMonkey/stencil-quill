import{r as t,h as i,g as s}from"./p-e9515f14.js";const e=class{constructor(i){t(this,i),this.format="html",this.debug="warn",this.strict=!0,this.styles="{}",this.preserveWhitespace=!1}setEditorContent(t){if("html"===this.format){const i=this.quillEditor.clipboard.convert(t);this.quillEditor.setContents(i,"api")}else if("text"===this.format)this.quillEditor.setText(t);else if("json"===this.format)try{this.quillEditor.setContents(JSON.parse(t),"api")}catch(i){this.quillEditor.setText(t,"api")}else this.quillEditor.setText(t,"api")}getEditorContent(){const t=this.quillEditor.getText(),i=this.quillEditor.getContents();let s=this.editorElement.children[0].innerHTML;if("<p><br></p>"!==s&&"<div><br><div>"!==s||(s=""),"html"===this.format)return s;if("text"===this.format)this.quillEditor.getText();else{if("json"!==this.format)return t;try{return JSON.stringify(i)}catch(i){return t}}}componentDidLoad(){let t=this.modules?JSON.parse(this.modules):{toolbar:!1};if(t.toolbar&&(t.toolbar=!1),this.quillEditor=new Quill(this.editorElement,{debug:this.debug,modules:t,readOnly:!0,theme:this.theme||"snow",formats:this.formats,strict:this.strict}),this.styles){const t=JSON.parse(this.styles);Object.keys(t).forEach(i=>{this.editorElement.style.setProperty(i,t[i])})}this.editorElement.classList.add("quill-view"),this.content&&(this.setEditorContent(this.content),this.quillEditor.history.clear())}updateStyle(t,i){if(this.editorElement){if(i){const t=JSON.parse(i);Object.keys(t).forEach(t=>{this.editorElement.style.setProperty(t,"")})}if(t){const i=JSON.parse(t);Object.keys(i).forEach(t=>{this.editorElement.style.setProperty(t,i[t])})}}}updateContent(t){const i=this.getEditorContent();if(["text","html","json"].indexOf(this.format)>-1&&t===i)return null;{let s=!1;try{const e=JSON.stringify(t);s=JSON.stringify(i)!==e}catch(t){return null}if(!s)return null}this.setEditorContent(t)}render(){return i(this.preserveWhitespace?"pre":"div",{"quill-element":!0,ref:t=>this.editorElement=t})}get wrapperElement(){return s(this)}static get watchers(){return{styles:["updateStyle"],content:["updateContent"]}}static get style(){return".ql-container.quill-view.sc-quill-view{border:0}"}};export{e as quill_view};